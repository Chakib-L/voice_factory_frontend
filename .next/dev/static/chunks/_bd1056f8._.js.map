{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/DEV/voice_factory/voice_factory_frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/DEV/voice_factory/voice_factory_frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/DEV/voice_factory/voice_factory_frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/DEV/voice_factory/voice_factory_frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/DEV/voice_factory/voice_factory_frontend/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useMemo, useRef, useState } from \"react\"\nimport dynamic from \"next/dynamic\"\nimport { Mic, Wifi, Bot, BarChart3 } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\n\n// Some environments (or editor tooling) may not include Node typings.\ndeclare const process: { env: Record<string, string | undefined> }\n\nconst Plot = dynamic(\n  async () => {\n    const Plotly = (await import(\"plotly.js-dist-min\")).default\n    const createPlotlyComponent = (await import(\"react-plotly.js/factory\")).default\n    return createPlotlyComponent(Plotly)\n  },\n  { ssr: false },\n)\n\nexport default function FactoryVoiceAssistant() {\n  const [isListening, setIsListening] = useState(false)\n  const [operatorMessage, setOperatorMessage] = useState(\"\")\n  const [recognizedQuestion, setRecognizedQuestion] = useState<string | null>(null)\n  const [aiResponse, setAiResponse] = useState(\"\")\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [pipelineStatus, setPipelineStatus] = useState<string | null>(null)\n  const [backendOk, setBackendOk] = useState<boolean | null>(null)\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\n  const [plotlyFigure, setPlotlyFigure] = useState<any | null>(null)\n  const [audioSrc, setAudioSrc] = useState<string | null>(null)\n  const [typedQuestion, setTypedQuestion] = useState(\"\")\n\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null)\n  const mediaStreamRef = useRef<MediaStream | null>(null)\n  const chunksRef = useRef<Blob[]>([])\n  const audioRef = useRef<HTMLAudioElement | null>(null)\n\n  const backendBaseUrl = useMemo(() => {\n    const raw = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8000\"\n    return raw.replace(/\\/+$/, \"\")\n  }, [])\n\n  useEffect(() => {\n    let cancelled = false\n    ;(async () => {\n      try {\n        const r = await fetch(`${backendBaseUrl}/health`, { cache: \"no-store\" })\n        if (!cancelled) setBackendOk(r.ok)\n      } catch {\n        if (!cancelled) setBackendOk(false)\n      }\n    })()\n    return () => {\n      cancelled = true\n    }\n  }, [backendBaseUrl])\n\n  const decodeApiError = async (r: Response) => {\n    try {\n      const data = await r.json()\n      if (typeof data?.detail === \"string\") return data.detail\n      return JSON.stringify(data)\n    } catch {\n      return await r.text()\n    }\n  }\n\n  const cleanOperatorText = (text: string): string => {\n    if (!text) return text\n    // Remove SPEAKER_XX patterns (e.g., \"SPEAKER_00:\", \"SPEAKER_01:\", etc.)\n    let cleaned = text.replace(/SPEAKER_\\d+:\\s*/gi, \"\")\n    // Remove timestamps in various formats: [00:00:00], [00:00], (00:00:00), (00:00), etc.\n    cleaned = cleaned.replace(/\\[?\\d{1,2}:\\d{2}(?::\\d{2})?\\]?\\s*/g, \"\")\n    // Remove any remaining speaker labels at the start\n    cleaned = cleaned.replace(/^SPEAKER\\s*\\d*\\s*:?\\s*/i, \"\")\n    // Clean up extra whitespace\n    cleaned = cleaned.trim().replace(/\\s+/g, \" \")\n    return cleaned\n  }\n\n  const applyBackendResponse = (data: any) => {\n    setAiResponse(typeof data?.answer_text === \"string\" ? data.answer_text : \"\")\n    setRecognizedQuestion(typeof data?.question_text === \"string\" ? data.question_text : null)\n    if (typeof data?.question_text === \"string\" && data.question_text.trim()) {\n      setOperatorMessage(cleanOperatorText(data.question_text.trim()))\n    }\n\n    const viz = data?.visualization\n    if (viz?.type === \"plotly\" && viz?.figure) {\n      setPlotlyFigure(viz.figure)\n    } else {\n      setPlotlyFigure(null)\n    }\n\n    const aud = data?.audio\n    if (aud?.audio_base64) {\n      const mime = aud?.mime_type || \"audio/wav\"\n      setAudioSrc(`data:${mime};base64,${aud.audio_base64}`)\n    } else {\n      setAudioSrc(null)\n    }\n  }\n\n  useEffect(() => {\n    if (!audioSrc) return\n    // Best-effort autoplay; browsers may block depending on user gesture policy.\n    const el = audioRef.current\n    if (!el) return\n    try {\n      el.currentTime = 0\n      const p = el.play()\n      if (p && typeof (p as any).catch === \"function\") (p as any).catch(() => {})\n    } catch {}\n  }, [audioSrc])\n\n  const sendTextToBackend = async (text: string) => {\n    const r = await fetch(`${backendBaseUrl}/v1/voice-factory/answer`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ text, include_audio: true }),\n    })\n    if (!r.ok) throw new Error(await decodeApiError(r))\n    return await r.json()\n  }\n\n  const sendAudioToBackend = async (audioBlob: Blob) => {\n    const form = new FormData()\n    form.append(\"transcript_level\", \"turn\")\n    form.append(\"audio\", new File([audioBlob], \"question.webm\", { type: audioBlob.type || \"audio/webm\" }))\n\n    const r = await fetch(`${backendBaseUrl}/v1/voice-factory/stt`, {\n      method: \"POST\",\n      body: form,\n    })\n    if (!r.ok) throw new Error(await decodeApiError(r))\n    return await r.json()\n  }\n\n  const handleSendTypedQuestion = async () => {\n    const q = typedQuestion.trim()\n    if (!q || isProcessing) return\n\n    setErrorMessage(null)\n    setOperatorMessage(q)\n    setRecognizedQuestion(null)\n    setAiResponse(\"\")\n    setPlotlyFigure(null)\n    setAudioSrc(null)\n    setIsProcessing(true)\n    setPipelineStatus(\"Generating answer…\")\n\n    try {\n      const data = await sendTextToBackend(q)\n      applyBackendResponse(data)\n    } catch (e: any) {\n      setErrorMessage(e?.message || \"Request failed\")\n    } finally {\n      setIsProcessing(false)\n      setPipelineStatus(null)\n    }\n  }\n\n  const handleMicClick = async () => {\n    if (isProcessing) return\n\n    if (!isListening) {\n      setErrorMessage(null)\n      setOperatorMessage(\"\")\n      setRecognizedQuestion(null)\n      setAiResponse(\"\")\n      setPlotlyFigure(null)\n      setAudioSrc(null)\n      setPipelineStatus(\"Recording…\")\n\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n        mediaStreamRef.current = stream\n\n        const recorder = new MediaRecorder(stream)\n        chunksRef.current = []\n\n        recorder.ondataavailable = (e) => {\n          if (e.data && e.data.size > 0) chunksRef.current.push(e.data)\n        }\n\n        recorder.onstop = async () => {\n          try {\n            setIsProcessing(true)\n            setPipelineStatus(\"Audio received. Transcribing…\")\n\n            const blob = new Blob(chunksRef.current, { type: recorder.mimeType || \"audio/webm\" })\n            const stt = await sendAudioToBackend(blob)\n            const q = typeof stt?.question_text === \"string\" ? stt.question_text : \"\"\n            const cleanedQ = q ? cleanOperatorText(q) : \"\"\n            setOperatorMessage(cleanedQ || \"STT returned empty text.\")\n            setRecognizedQuestion(cleanedQ || null)\n\n            if (!q) throw new Error(\"STT returned empty text.\")\n\n            // Force a paint so the user sees the transcript immediately,\n            // before starting the heavier Text2SQL/TTS request.\n            await new Promise<void>((resolve) => requestAnimationFrame(() => resolve()))\n\n            setPipelineStatus(\"Generating answer…\")\n            const data = await sendTextToBackend(q)\n            applyBackendResponse(data)\n          } catch (e: any) {\n            setErrorMessage(e?.message || \"Audio request failed\")\n          } finally {\n            setIsProcessing(false)\n            setPipelineStatus(null)\n            // Stop tracks so the mic is released\n            try {\n              mediaStreamRef.current?.getTracks().forEach((t: MediaStreamTrack) => t.stop())\n            } catch {}\n            mediaStreamRef.current = null\n            mediaRecorderRef.current = null\n            chunksRef.current = []\n          }\n        }\n\n        mediaRecorderRef.current = recorder\n        recorder.start()\n        setIsListening(true)\n      } catch (e: any) {\n        setErrorMessage(e?.message || \"Microphone permission denied\")\n        setIsListening(false)\n      }\n    } else {\n      // Stop recording -> triggers onstop -> sends to backend\n      setIsListening(false)\n      try {\n        mediaRecorderRef.current?.stop()\n      } catch (e: any) {\n        setErrorMessage(e?.message || \"Failed to stop recording\")\n      }\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#0a1425] text-gray-100 w-full h-full\">\n      {/* Header */}\n      <header className=\"border-b border-gray-800 px-6 py-4 xl:px-12 xl:py-6\">\n        <div className=\"flex items-center justify-between max-w-[1920px] mx-auto\">\n          <h1 className=\"text-xl xl:text-2xl 2xl:text-3xl font-semibold text-teal-400\">Factory Voice Assistant</h1>\n          <div className=\"flex items-center gap-6 xl:gap-8\">\n            <div className=\"flex items-center gap-2 text-sm xl:text-base 2xl:text-lg text-teal-400\">\n              <Wifi className=\"h-4 w-4 xl:h-5 xl:w-5 2xl:h-6 2xl:w-6\" />\n              <span className={backendOk === false ? \"text-red-400\" : \"\"}>\n                {backendOk === null ? \"Checking…\" : backendOk ? \"Connected\" : \"Disconnected\"}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2 text-sm xl:text-base 2xl:text-lg text-teal-400\">\n              <Bot className=\"h-4 w-4 xl:h-5 xl:w-5 2xl:h-6 2xl:w-6\" />\n              <span>AI Ready</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 min-h-[calc(100vh-73px)] lg:h-[calc(100vh-73px)] xl:h-[calc(100vh-85px)] 2xl:h-[calc(100vh-97px)] max-w-[1920px] mx-auto\">\n        {/* Left Panel - Operator Message (1/3) */}\n        <div className=\"border-b lg:border-b-0 lg:border-r border-gray-800 p-6 xl:p-8 2xl:p-12 flex flex-col bg-[#0a1425] min-h-[50vh] lg:min-h-0\">\n          <div className=\"mb-6 xl:mb-8 2xl:mb-10\">\n            <div className=\"flex items-center gap-3 xl:gap-4 mb-2 xl:mb-3\">\n              <div className=\"w-8 h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 rounded-full bg-gray-800 flex items-center justify-center\">\n                <svg className=\"w-4 h-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div>\n                <h2 className=\"text-lg xl:text-xl 2xl:text-2xl font-medium text-gray-200\">Operator Message</h2>\n                <div className=\"flex items-center gap-2 xl:gap-3 mt-1 xl:mt-2\">\n                  <div className={`w-2 h-2 xl:w-2.5 xl:h-2.5 2xl:w-3 2xl:h-3 rounded-full ${isListening ? \"bg-red-500\" : \"bg-green-500\"}`} />\n                  <span className=\"text-sm xl:text-base 2xl:text-lg text-gray-400\">{isListening ? \"Listening\" : \"Ready\"}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Typed input (optional) */}\n          <div className=\"w-full max-w-md xl:max-w-lg 2xl:max-w-xl mx-auto mb-6 xl:mb-8 2xl:mb-10 space-y-3\">\n            <div className=\"flex gap-3\">\n              <Input\n                value={typedQuestion}\n                onChange={(e: any) => setTypedQuestion(e.target.value)}\n                placeholder=\"Type a question (or use the mic)…\"\n                className=\"bg-gray-900/50 border-gray-800 text-gray-200 placeholder:text-gray-500\"\n                onKeyDown={(e: any) => {\n                  if (e.key === \"Enter\") handleSendTypedQuestion()\n                }}\n                disabled={isProcessing}\n              />\n              <Button onClick={handleSendTypedQuestion} disabled={isProcessing || !typedQuestion.trim()}>\n                Send\n              </Button>\n            </div>\n            <p className=\"text-xs xl:text-sm 2xl:text-base text-gray-500\">\n              Backend: <span className=\"font-mono\">{backendBaseUrl}</span>\n            </p>\n          </div>\n\n          {/* Microphone Button */}\n          <div className=\"flex-1 flex flex-col items-center justify-center\">\n            <button\n              onClick={handleMicClick}\n              className={`w-32 h-32 xl:w-40 xl:h-40 2xl:w-48 2xl:h-48 rounded-full transition-all duration-300 p-0 flex items-center justify-center ${\n                isListening ? \"bg-red-500 hover:bg-red-600 scale-110\" : \"bg-teal-500 hover:bg-teal-600\"\n              }`}\n            >\n              <Mic className=\"!h-20 !w-20 xl:!h-24 xl:!w-24 2xl:!h-32 2xl:!w-32 text-gray-900\" strokeWidth={2.5} />\n            </button>\n            <p className=\"text-sm xl:text-base 2xl:text-lg text-gray-400 mt-6 xl:mt-8 2xl:mt-10\">{isListening ? \"Listening...\" : \"Click to speak\"}</p>\n\n            {/* Question Display */}\n            <Card className=\"w-full max-w-md xl:max-w-lg 2xl:max-w-xl mt-8 xl:mt-10 2xl:mt-12 !bg-gray-900/50 border-gray-800 p-6 xl:p-8 2xl:p-10\">\n              <p className=\"text-sm xl:text-base 2xl:text-lg text-gray-500 italic font-mono\">\n                {operatorMessage ? cleanOperatorText(operatorMessage) : \"Your question will appear here...\"}\n              </p>\n              {pipelineStatus ? (\n                <p className=\"text-xs xl:text-sm 2xl:text-base text-gray-400 mt-3\">{pipelineStatus}</p>\n              ) : null}\n            </Card>\n\n            {errorMessage ? (\n              <Card className=\"w-full max-w-md xl:max-w-lg 2xl:max-w-xl mt-4 !bg-red-900/20 border-red-900/40 p-4\">\n                <p className=\"text-sm xl:text-base 2xl:text-lg text-red-200 font-mono\">{errorMessage}</p>\n              </Card>\n            ) : null}\n          </div>\n        </div>\n\n        {/* Right Panel - AI Response (2/3) */}\n        <div className=\"lg:col-span-2 p-6 xl:p-8 2xl:p-12 flex flex-col bg-[#0a1425] min-h-[50vh] lg:min-h-0\">\n          <div className=\"mb-6 xl:mb-8 2xl:mb-10\">\n            <div className=\"flex items-center gap-3 xl:gap-4 mb-2 xl:mb-3\">\n              <div className=\"w-8 h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 rounded-full bg-teal-500/20 flex items-center justify-center\">\n                <Bot className=\"w-4 h-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 text-teal-400\" />\n              </div>\n              <div>\n                <h2 className=\"text-lg xl:text-xl 2xl:text-2xl font-medium text-teal-400\">AI Response</h2>\n                <div className=\"flex items-center gap-2 xl:gap-3 mt-1 xl:mt-2\">\n                  <div\n                    className={`w-2 h-2 xl:w-2.5 xl:h-2.5 2xl:w-3 2xl:h-3 rounded-full ${isProcessing ? \"bg-yellow-500 animate-pulse\" : \"bg-gray-600\"}`}\n                  />\n                  <span className=\"text-sm xl:text-base 2xl:text-lg text-gray-400\">{isProcessing ? \"Waiting\" : \"Idle\"}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* AI Response Content */}\n          <Card className=\"!bg-gray-900/30 border-gray-800 p-5 xl:p-7 2xl:p-9 mb-4 xl:mb-6 2xl:mb-8 max-h-48 xl:max-h-56 2xl:max-h-64 overflow-y-auto\">\n            <p className=\"text-sm xl:text-base 2xl:text-lg text-gray-400 italic font-mono\">{aiResponse || \"AI response will appear here...\"}</p>\n          </Card>\n\n          {audioSrc ? (\n            <Card className=\"!bg-gray-900/30 border-gray-800 p-4 xl:p-6 2xl:p-8 mb-4 xl:mb-6 2xl:mb-8\">\n              <div className=\"text-xs xl:text-sm 2xl:text-base text-gray-400 mb-2\">Answer audio</div>\n              <audio ref={audioRef} controls autoPlay playsInline src={audioSrc} className=\"w-full\" />\n            </Card>\n          ) : null}\n\n          {/* Visual Output Section */}\n          <div className=\"space-y-4 xl:space-y-6 2xl:space-y-8\">\n            <div className=\"flex items-center gap-2 xl:gap-3 text-teal-400\">\n              <BarChart3 className=\"w-5 h-5 xl:w-6 xl:h-6 2xl:w-7 2xl:h-7\" />\n              <h3 className=\"text-sm xl:text-base 2xl:text-lg font-semibold uppercase tracking-wider\">Visual Output</h3>\n            </div>\n            <Card className=\"!bg-gray-900/30 border-gray-800 p-8 xl:p-10 2xl:p-12 h-64 xl:h-80 2xl:h-96 flex items-center justify-center\">\n              {plotlyFigure ? (\n                <div className=\"w-full h-full\">\n                  <Plot\n                    data={plotlyFigure.data}\n                    layout={{\n                      ...(plotlyFigure.layout || {}),\n                      autosize: true,\n                      paper_bgcolor: \"rgba(0,0,0,0)\",\n                      plot_bgcolor: \"rgba(0,0,0,0)\",\n                      font: { color: \"#e5e7eb\" },\n                      title: plotlyFigure.layout?.title || undefined,\n                    }}\n                    config={{ responsive: true, displayModeBar: false }}\n                    style={{ width: \"100%\", height: \"100%\" }}\n                    useResizeHandler\n                  />\n                </div>\n              ) : (\n                <p className=\"text-sm xl:text-base 2xl:text-lg text-gray-600 text-center\">\n                  Data visualizations will appear here\n                </p>\n              )}\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}